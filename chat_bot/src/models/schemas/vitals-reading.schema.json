{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://kidjamo.tech4good.fr/schemas/vitals-reading.schema.json",
  "title": "Lecture des données vitales",
  "description": "Schéma pour les données vitales provenant des capteurs IoT",
  "type": "object",
  "required": [
    "timestamp",
    "device_id",
    "patient_id",
    "sequence"
  ],
  "properties": {
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Horodatage UTC au format ISO-8601",
      "examples": ["2025-01-02T14:30:00.000Z"]
    },
    "device_id": {
      "type": "string",
      "pattern": "^KIDJAMO-[A-Z0-9]{8}$",
      "description": "Identifiant unique du dispositif",
      "examples": ["KIDJAMO-AB123456"]
    },
    "patient_id": {
      "type": "string",
      "description": "Identifiant anonymisé du patient",
      "examples": ["patient_12345"]
    },
    "sequence": {
      "type": "integer",
      "minimum": 0,
      "description": "Numéro de séquence pour détecter les données manquantes"
    },
    "heart_rate": {
      "type": "number",
      "minimum": 30,
      "maximum": 220,
      "description": "Fréquence cardiaque en battements par minute"
    },
    "spo2": {
      "type": "number",
      "minimum": 70,
      "maximum": 100,
      "description": "Saturation en oxygène en pourcentage"
    },
    "temperature": {
      "type": "number",
      "minimum": 30.0,
      "maximum": 45.0,
      "description": "Température corporelle en degrés Celsius"
    },
    "respiratory_rate": {
      "type": "number",
      "minimum": 5,
      "maximum": 50,
      "description": "Fréquence respiratoire en respirations par minute"
    },
    "battery_level": {
      "type": "integer",
      "minimum": 0,
      "maximum": 100,
      "description": "Niveau de batterie en pourcentage"
    },
    "device_firmware": {
      "type": "string",
      "pattern": "^v\\d+\\.\\d+\\.\\d+$",
      "description": "Version du firmware du dispositif",
      "examples": ["v1.2.3"]
    },
    "signal_quality": {
      "type": "integer",
      "minimum": 0,
      "maximum": 100,
      "description": "Qualité du signal de transmission"
    },
    "location": {
      "type": "object",
      "description": "Coordonnées GPS optionnelles (si consentement)",
      "properties": {
        "latitude": {
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "longitude": {
          "type": "number",
          "minimum": -180,
          "maximum": 180
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Métadonnées additionnelles",
      "properties": {
        "activity_level": {
          "type": "string",
          "enum": ["rest", "light", "moderate", "intense"]
        },
        "body_position": {
          "type": "string",
          "enum": ["lying", "sitting", "standing", "walking"]
        }
      }
    }
  }
}

